<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Affirmation Generator & Breath Timer</title>
  <style>
    /* BODY & CONTAINER */
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: linear-gradient(135deg, #1a1a1a, #1f4040);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      margin: 0;
      color: #e0e0e0;
      padding: 20px;
    }

    .container {
      background: #2c2c2c;
      padding: 30px 40px;
      border-radius: 16px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.5);
      text-align: center;
      max-width: 420px;
      margin-bottom: 40px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    h1, h2, h3 {
      margin-bottom: 16px;
      color: #f0f0f0;
    }

    p {
      color: #f5f5f5;
      margin: 12px 0;
    }

    select, button {
      padding: 10px 14px;
      border-radius: 8px;
      border: none;
      font-size: 1rem;
      outline: none;
    }

    select {
      background: #3a3a3a;
      color: #e0e0e0;
      margin-bottom: 12px;
    }

    .button-row {
      display: flex;
      justify-content: center;
      gap: 8px;
      flex-wrap: wrap;
      margin-top: 12px;
    }

    button {
      background: #6a5acd;
      color: #ffffff;
      cursor: pointer;
      transition: background 0.2s ease, transform 0.1s ease;
    }

    button:hover {
      background: #7b66e0;
      transform: translateY(-2px);
    }

    /* Favorites list */
    #favoritesList {
      list-style: none;
      padding-left: 0;
      margin-top: 8px;
      width: 100%;
    }

    #favoritesList li {
      background: #3a3a3a;
      padding: 6px 10px;
      border-radius: 8px;
      margin: 4px 0;
      text-align: left;
    }

    /* Breath circle */
    #breath-circle {
      background-color: transparent;
      border: 8px solid #6a5acd;
      border-radius: 50%;
      transition: transform 1s linear;
      margin: 20px 0 60px 0;
      width: 120px;
      height: 120px;
      box-sizing: border-box;
    }
  </style>
</head>
<body>

  <!-- AFFIRMATION GENERATOR -->
  <div class="container">
    <h1>Affirmation Generator</h1>

    <p id="affirmation"></p>

    <select id="category">
      <option value="motivation">Motivation</option>
      <option value="calm">Calm</option>
      <option value="confidence">Confidence</option>
    </select>

    <div class="button-row">
      <button onclick="showAffirmation()">Get Affirmation</button>
      <button onclick="showRandomAffirmation()">Surprise Me!</button>
      <button onclick="saveFavorite()">Save to Favorites ❤️</button>
    </div>

    <div style="text-align: center; margin-top: 16px; width: 100%;">
      <h3>Your Favorites:</h3>
      <ul id="favoritesList"></ul>
    </div>
  </div>

  <!-- BREATH TIMER -->
  <div class="container" id="breath-timer-container">

    <h2>Breath Timer</h2>

    <!-- Preset Selector -->
    <label for="presetSelect" style="margin-bottom: 8px;">Choose Preset:</label>
    <select id="presetSelect">
      <option value="Box (4-4-4-4)">Box (4-4-4-4)</option>
      <option value="Calming (4-7-8-7)">Calming (4-7-8-7)</option>
    </select>

    <!-- Breathing Exercise Info -->
    <p id="preset-info" style="margin-top: 8px; font-size: 0.9rem; color: #c0c0c0; min-height: 80px; text-align: left;">
      Select a preset to see instructions.
    </p>
    <!-- PHASE INSTRUCTIONS CONTAINER -->
<div id="phase-instructions" style="font-size: 1.2rem; color:#c0c0c0; min-height: 60px; margin-top:10px; text-align:center; opacity:0; transition: opacity 0.5s;">
  <!-- Phase-specific instruction will appear here -->
</div>

    <p id="phase-name">Press Start</p>
    <p id="phase-countdown">0</p>
    <div style="height: 20px;"></div>

    <div id="breath-circle"></div>

    <div class="button-row">
      <button id="start-timer">Start</button>
      <button id="stop-timer">Stop</button>
    </div>

    <audio id="beep-sound">
      <source src="https://www.soundjay.com/buttons/sounds/beep-07.mp3" type="audio/mpeg">
    </audio>
  </div>

  <script>
document.addEventListener("DOMContentLoaded", () => {

  /* --------------------- AFFIRMATIONS --------------------- */
  const affirmations = {
    motivation: [
      "You are capable of amazing things.",
      "Your potential is limitless.",
      "Every day is a fresh start."
    ],
    calm: [
      "Breathe deeply and let go.",
      "Peace begins within.",
      "You are relaxed and centered."
    ],
    confidence: [
      "You are strong and confident.",
      "You believe in yourself.",
      "Your confidence inspires others."
    ]
  };

  function showAffirmation() {
    const category = document.getElementById("category").value;
    const list = affirmations[category];
    const randomIndex = Math.floor(Math.random() * list.length);
    const affirmation = list[randomIndex];
    document.getElementById("affirmation").innerText = affirmation;
  }

  function showRandomAffirmation() {
    const categories = Object.keys(affirmations);
    const randomCategory = categories[Math.floor(Math.random() * categories.length)];
    const list = affirmations[randomCategory];
    const randomIndex = Math.floor(Math.random() * list.length);
    const affirmation = list[randomIndex];
    document.getElementById("affirmation").innerText = affirmation;
  }

  function getTodayString() {
    const today = new Date();
    return today.toISOString().split('T')[0];
  }

  function showDailyAffirmation() {
    const todayKey = "dailyAffirmationDate";
    const storedDate = localStorage.getItem(todayKey);
    const storedAffirmation = localStorage.getItem("dailyAffirmationText");
    const today = getTodayString();

    if (storedDate === today && storedAffirmation) {
      document.getElementById("affirmation").innerText = storedAffirmation;
    } else {
      const categories = Object.keys(affirmations);
      const randomCategory = categories[Math.floor(Math.random() * categories.length)];
      const list = affirmations[randomCategory];
      const randomIndex = Math.floor(Math.random() * list.length);
      const randomAffirmation = list[randomIndex];

      document.getElementById("affirmation").innerText = randomAffirmation;
      localStorage.setItem(todayKey, today);
      localStorage.setItem("dailyAffirmationText", randomAffirmation);
    }
  }

  function loadFavorites() {
    const favorites = JSON.parse(localStorage.getItem("favorites")) || [];
    const listEl = document.getElementById("favoritesList");
    listEl.innerHTML = "";
    favorites.forEach((text) => {
      const li = document.createElement("li");
      li.textContent = text;
      listEl.appendChild(li);
    });
  }

  function saveFavorite() {
    const current = document.getElementById("affirmation").innerText;
    if (!current) return;
    let favorites = JSON.parse(localStorage.getItem("favorites")) || [];
    if (!favorites.includes(current)) {
      favorites.push(current);
      localStorage.setItem("favorites", JSON.stringify(favorites));
      loadFavorites();
    }
  }

  showDailyAffirmation();
  loadFavorites();

 /* --------------------- BREATH TIMER --------------------- */
const breathPresets = {
  "Box (4-4-4-4)": [
    { name: "Inhale", duration: 4 },
    { name: "Hold", duration: 4 },
    { name: "Exhale", duration: 4 },
    { name: "Hold", duration: 4 },
  ],
  "Calming (4-7-8-7)": [
    { name: "Inhale", duration: 4 },
    { name: "Hold", duration: 7 },
    { name: "Exhale", duration: 8 },
    { name: "Hold", duration: 7 },
  ]
}; 

// PHASE-SPECIFIC INSTRUCTIONS
const presetPhasesText = {
  "Box (4-4-4-4)": [
    "Inhale slowly through your nose for 4 counts.",
    "Hold your breath for 4 counts.",
    "Exhale slowly through your mouth for 4 counts.",
    "Hold your breath again for 4 counts."
  ],
  "Calming (4-7-8-7)": [
    "Inhale quietly through your nose for 4 seconds.",
    "Hold your breath for 7 seconds.",
    "Exhale forcefully through your mouth for 8 seconds.",
    "Hold your breath again for 7 seconds."
  ]
};

  let phases = [...breathPresets["Box (4-4-4-4)"]];
  let currentPhase = 0;
  let remainingTime = 0;
  let timerInterval = null;

  const phaseNameEl = document.getElementById("phase-name");
  const phaseCountdownEl = document.getElementById("phase-countdown");
  const beepSound = document.getElementById("beep-sound");
  const breathCircle = document.getElementById("breath-circle");
  const presetSelect = document.getElementById("presetSelect");
  const presetInfoEl = document.getElementById("preset-info");

  const presetInfo = {
    "Box (4-4-4-4)": `Box Breathing (Square Breathing):
Inhale slowly through your nose for 4 counts.
Hold your breath for 4 counts.
Exhale slowly through your mouth for 4 counts.
Hold your breath again for 4 counts.
Repeat as needed.`,
    "Calming (4-7-8-7)": `4-7-8 Breathing (Relaxing Breath):
Inhale quietly through your nose for 4 seconds.
Hold your breath for 7 seconds.
Exhale forcefully through your mouth for 8 seconds.
Repeat the cycle up to 4 times.`
  };

  function updateCircle() {
    if (!breathCircle) return;
    const phase = phases[currentPhase];

    if (phase.name === "Inhale") {
      breathCircle.style.transition = `transform ${phase.duration}s linear`;
      breathCircle.style.transform = "scale(1.5)";
    } else if (phase.name === "Exhale") {
      breathCircle.style.transition = `transform ${phase.duration}s linear`;
      breathCircle.style.transform = "scale(0.7)";
    } else {
      breathCircle.style.transition = "none";
      if (phases[currentPhase - 1]?.name === "Inhale") {
        breathCircle.style.transform = "scale(1.5)";
      } else if (phases[currentPhase - 1]?.name === "Exhale") {
        breathCircle.style.transform = "scale(0.7)";
      }
    }
  }

  function startBreathTimer() {
    if (timerInterval) return;

    const selectedPreset = presetSelect.value;
    presetInfoEl.innerText = presetInfo[selectedPreset] || "";

    phases = breathPresets[selectedPreset].map(p => ({ ...p }));

    currentPhase = 0;
    remainingTime = phases[currentPhase].duration;
    phaseNameEl.innerText = phases[currentPhase].name;
    phaseCountdownEl.innerText = remainingTime;
    beepSound.play();
    updateCircle();

    timerInterval = setInterval(() => {
      remainingTime--;
      phaseCountdownEl.innerText = remainingTime;

      if (remainingTime <= 0) {
        currentPhase = (currentPhase + 1) % phases.length;
        remainingTime = phases[currentPhase].duration;
        phaseNameEl.innerText = phases[currentPhase].name;
        phaseCountdownEl.innerText = remainingTime;
        beepSound.play();
      }
      updateCircle();
    }, 1000);
  }

  function stopBreathTimer() {
    clearInterval(timerInterval);
    timerInterval = null;
    phaseNameEl.innerText = "Press Start";
    phaseCountdownEl.innerText = 0;
    breathCircle.style.transform = "scale(1)";
  }

  document.getElementById("start-timer").addEventListener("click", startBreathTimer);
  document.getElementById("stop-timer").addEventListener("click", stopBreathTimer);

});
  </script>
</body>
</html>
